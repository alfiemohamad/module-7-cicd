/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profile/route";
exports.ids = ["app/api/profile/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_macbook_Documents_projects_binar_modul_6_demo_repository_src_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/profile/route.ts */ \"(rsc)/./src/app/api/profile/route.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_Users_macbook_Documents_projects_binar_modul_6_demo_repository_src_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_Users_macbook_Documents_projects_binar_modul_6_demo_repository_src_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profile/route\",\n        pathname: \"/api/profile\",\n        filename: \"route\",\n        bundlePath: \"app/api/profile/route\"\n    },\n    resolvedPagePath: \"/Users/macbook/Documents/projects/binar/modul_6/demo-repository/src/app/api/profile/route.ts\",\n    nextConfigOutput,\n    userland: _Users_macbook_Documents_projects_binar_modul_6_demo_repository_src_app_api_profile_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9maWxlJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvZmlsZSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hY2Jvb2slMkZEb2N1bWVudHMlMkZwcm9qZWN0cyUyRmJpbmFyJTJGbW9kdWxfNiUyRmRlbW8tcmVwb3NpdG9yeSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYWNib29rJTJGRG9jdW1lbnRzJTJGcHJvamVjdHMlMkZiaW5hciUyRm1vZHVsXzYlMkZkZW1vLXJlcG9zaXRvcnkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzRDO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRixxQyIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWFjYm9vay9Eb2N1bWVudHMvcHJvamVjdHMvYmluYXIvbW9kdWxfNi9kZW1vLXJlcG9zaXRvcnkvc3JjL2FwcC9hcGkvcHJvZmlsZS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvZmlsZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3Byb2ZpbGVcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2ZpbGUvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFjYm9vay9Eb2N1bWVudHMvcHJvamVjdHMvYmluYXIvbW9kdWxfNi9kZW1vLXJlcG9zaXRvcnkvc3JjL2FwcC9hcGkvcHJvZmlsZS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./src/app/api/profile/route.ts":
/*!**************************************!*\
  !*** ./src/app/api/profile/route.ts ***!
  \**************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_database__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/database */ \"(rsc)/./src/lib/database.ts\");\n/* harmony import */ var _lib_jwt__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/jwt */ \"(rsc)/./src/lib/jwt.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_database__WEBPACK_IMPORTED_MODULE_1__]);\n_lib_database__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Sudah diperbaiki: user diambil dengan typing yang benar dari parameter function\nasync function getProfile(request) {\n    console.time(\"Profile Get Execution\");\n    try {\n        const user = request.user;\n        if (!user || !user.userId) {\n            console.timeEnd(\"Profile Get Execution\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Unauthorized.\"\n            }, {\n                status: 401\n            });\n        }\n        // Sudah diperbaiki: query lebih efisien, hanya ambil data yang diperlukan tanpa subquery berlebihan\n        const selectQuery = `\n      SELECT \n        u.id, u.auth_id, u.username, u.full_name, u.bio, u.long_bio, u.profile_json, u.address, u.phone_number, u.birth_date,\n        a.email,\n        ur.role,\n        ud.division_name\n      FROM users u\n      LEFT JOIN auth a ON u.auth_id = a.id\n      LEFT JOIN user_roles ur ON u.id = ur.user_id\n      LEFT JOIN user_divisions ud ON u.id = ud.user_id\n      WHERE u.id = $1\n      LIMIT 1\n    `;\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.executeQuery)(selectQuery, [\n            user.userId\n        ]);\n        if (result.rows.length === 0) {\n            console.timeEnd(\"Profile Get Execution\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"User not found.\"\n            }, {\n                status: 404\n            });\n        }\n        const userData = result.rows[0];\n        console.timeEnd(\"Profile Get Execution\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            user: {\n                id: userData.id,\n                authId: userData.auth_id,\n                username: userData.username,\n                fullName: userData.full_name,\n                email: userData.email,\n                bio: userData.bio,\n                longBio: userData.long_bio,\n                profileJson: userData.profile_json,\n                address: userData.address,\n                phoneNumber: userData.phone_number,\n                birthDate: userData.birth_date,\n                role: userData.role,\n                division: userData.division_name\n            }\n        });\n    } catch (error) {\n        console.error(\"Profile get error:\", error);\n        console.timeEnd(\"Profile Get Execution\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Internal server error.\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Sudah diperbaiki: user diambil dengan typing yang benar dari parameter function\nasync function updateProfile(request) {\n    console.time(\"Profile Update Execution\");\n    try {\n        const { username, fullName, email, phone, birthDate, bio, longBio, address, profileJson } = await request.json();\n        const errors = {};\n        if (!username || username.length < 6) {\n            errors.username = \"Username must be at least 6 characters.\";\n        }\n        if (!fullName) {\n            errors.fullName = \"Full name is required.\";\n        }\n        if (!email || !/^\\S+@\\S+\\.\\S+$/.test(email)) {\n            errors.email = \"Must be a valid email format.\";\n        }\n        if (!phone || !/^\\d{10,15}$/.test(phone)) {\n            errors.phone = \"Phone must be 10-15 digits.\";\n        }\n        if (birthDate) {\n            const date = new Date(birthDate);\n            const today = new Date();\n            today.setHours(0, 0, 0, 0);\n            if (date > today) {\n                errors.birthDate = \"Birth date cannot be in the future.\";\n            }\n        }\n        if (bio && bio.length > 160) {\n            errors.bio = \"Bio must be 160 characters or less.\";\n        }\n        if (longBio && longBio.length > 2000) {\n            errors.longBio = \"Long bio must be 2000 characters or less.\";\n        }\n        if (Object.keys(errors).length > 0) {\n            console.timeEnd(\"Profile Update Execution\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Validation failed\",\n                errors\n            }, {\n                status: 400\n            });\n        }\n        const user = request.user;\n        if (!user || !user.userId) {\n            console.timeEnd(\"Profile Update Execution\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Unauthorized.\"\n            }, {\n                status: 401\n            });\n        }\n        // Sudah diperbaiki: query update efisien, hanya update field yang diperlukan\n        const updateQuery = `\n      UPDATE users \n      SET username = $1, full_name = $2, bio = $3, long_bio = $4, \n          address = $5, phone_number = $6, profile_json = $7, updated_at = CURRENT_TIMESTAMP\n      WHERE id = $8\n    `;\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.executeQuery)(updateQuery, [\n            username,\n            fullName,\n            bio,\n            longBio,\n            address,\n            phone,\n            profileJson ? JSON.stringify(profileJson) : null,\n            user.userId\n        ]);\n        // Sudah diperbaiki: select setelah update hanya ambil data yang diperlukan\n        const selectQuery = `\n      SELECT \n        u.id, u.auth_id, u.username, u.full_name, u.bio, u.long_bio, u.profile_json, u.address, u.phone_number, u.birth_date,\n        ur.role,\n        ud.division_name\n      FROM users u\n      LEFT JOIN user_roles ur ON u.id = ur.user_id\n      LEFT JOIN user_divisions ud ON u.id = ud.user_id\n      WHERE u.id = $1\n      LIMIT 1\n    `;\n        const result = await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.executeQuery)(selectQuery, [\n            user.userId\n        ]);\n        const updatedUser = result.rows[0];\n        // Log the profile update action\n        await (0,_lib_database__WEBPACK_IMPORTED_MODULE_1__.executeQuery)(\"INSERT INTO user_logs (user_id, action) VALUES ($1, $2)\", [\n            user.userId,\n            \"update_profile\"\n        ]);\n        console.timeEnd(\"Profile Update Execution\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            user: {\n                id: updatedUser.id,\n                authId: updatedUser.auth_id,\n                username: updatedUser.username,\n                fullName: updatedUser.full_name,\n                bio: updatedUser.bio,\n                longBio: updatedUser.long_bio,\n                profileJson: updatedUser.profile_json,\n                address: updatedUser.address,\n                phoneNumber: updatedUser.phone_number,\n                birthDate: updatedUser.birth_date,\n                role: updatedUser.role,\n                division: updatedUser.division_name\n            }\n        });\n    } catch (error) {\n        console.error(\"Profile update error:\", error);\n        console.timeEnd(\"Profile Update Execution\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Internal server error.\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Sudah diperbaiki: wrapping dengan auth middleware sudah benar untuk proteksi endpoint\nconst GET = (0,_lib_jwt__WEBPACK_IMPORTED_MODULE_2__.authMiddleware)(getProfile);\nconst PUT = (0,_lib_jwt__WEBPACK_IMPORTED_MODULE_2__.authMiddleware)(updateProfile); // Penjelasan: Sekarang fungsi getProfile dan updateProfile sudah menggunakan typing user yang benar pada parameter, sehingga aman digunakan dengan authMiddleware. Query juga sudah lebih efisien dan hanya mengambil field yang diperlukan.\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU02QyxjQUFjdkMsT0FBT0MsSUFBSSxDQUFDLEVBQUU7UUFFbEMsZ0NBQWdDO1FBQ2hDLE1BQU1kLDJEQUFZQSxDQUNoQiwyREFDQTtZQUFDTSxLQUFLQyxNQUFNO1lBQUU7U0FBaUI7UUFHakNILFFBQVFJLE9BQU8sQ0FBQztRQUNoQixPQUFPVCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUFDO1lBQ3ZCUSxTQUFTO1lBQ1RYLE1BQU07Z0JBQ0pZLElBQUlrQyxZQUFZbEMsRUFBRTtnQkFDbEJDLFFBQVFpQyxZQUFZaEMsT0FBTztnQkFDM0JDLFVBQVUrQixZQUFZL0IsUUFBUTtnQkFDOUJDLFVBQVU4QixZQUFZN0IsU0FBUztnQkFDL0JFLEtBQUsyQixZQUFZM0IsR0FBRztnQkFDcEJDLFNBQVMwQixZQUFZekIsUUFBUTtnQkFDN0JDLGFBQWF3QixZQUFZdkIsWUFBWTtnQkFDckNDLFNBQVNzQixZQUFZdEIsT0FBTztnQkFDNUJDLGFBQWFxQixZQUFZcEIsWUFBWTtnQkFDckNDLFdBQVdtQixZQUFZbEIsVUFBVTtnQkFDakNDLE1BQU1pQixZQUFZakIsSUFBSTtnQkFDdEJDLFVBQVVnQixZQUFZZixhQUFhO1lBQ3JDO1FBQ0Y7SUFDRixFQUFFLE9BQU9DLE9BQU87UUFDZGxDLFFBQVFrQyxLQUFLLENBQUMseUJBQXlCQTtRQUN2Q2xDLFFBQVFJLE9BQU8sQ0FBQztRQUNoQixPQUFPVCxxREFBWUEsQ0FBQ1UsSUFBSSxDQUN0QjtZQUFFQyxTQUFTO1FBQXlCLEdBQ3BDO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGO0FBRUEsd0ZBQXdGO0FBQ2pGLE1BQU0wQyxNQUFNcEQsd0RBQWNBLENBQUNDLFlBQVk7QUFDdkMsTUFBTW9ELE1BQU1yRCx3REFBY0EsQ0FBQ3NDLGVBQWUsQ0FDakQsNk9BQTZPIiwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9Eb2N1bWVudHMvcHJvamVjdHMvYmluYXIvbW9kdWxfNi9kZW1vLXJlcG9zaXRvcnkvc3JjL2FwcC9hcGkvcHJvZmlsZS9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGV4ZWN1dGVRdWVyeSB9IGZyb20gXCJAL2xpYi9kYXRhYmFzZVwiO1xuaW1wb3J0IHsgYXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwiQC9saWIvand0XCI7XG5cbmV4cG9ydCB0eXBlIFByb2ZpbGVEYXRhID0ge1xuICB1c2VybmFtZTogc3RyaW5nO1xuICBmdWxsTmFtZTogc3RyaW5nO1xuICBlbWFpbDogc3RyaW5nO1xuICBwaG9uZTogc3RyaW5nO1xuICBiaXJ0aERhdGU6IHN0cmluZztcbiAgYmlvPzogc3RyaW5nO1xuICBsb25nQmlvPzogc3RyaW5nO1xuICBhZGRyZXNzPzogc3RyaW5nO1xuICBwcm9maWxlSnNvbj86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xufTtcblxuLy8gU3VkYWggZGlwZXJiYWlraTogdXNlciBkaWFtYmlsIGRlbmdhbiB0eXBpbmcgeWFuZyBiZW5hciBkYXJpIHBhcmFtZXRlciBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZShyZXF1ZXN0OiBSZXF1ZXN0ICYgeyB1c2VyPzogeyB1c2VySWQ6IG51bWJlciB9IH0pIHtcbiAgY29uc29sZS50aW1lKFwiUHJvZmlsZSBHZXQgRXhlY3V0aW9uXCIpO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IHJlcXVlc3QudXNlcjtcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudXNlcklkKSB7XG4gICAgICBjb25zb2xlLnRpbWVFbmQoXCJQcm9maWxlIEdldCBFeGVjdXRpb25cIik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZC5cIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIFN1ZGFoIGRpcGVyYmFpa2k6IHF1ZXJ5IGxlYmloIGVmaXNpZW4sIGhhbnlhIGFtYmlsIGRhdGEgeWFuZyBkaXBlcmx1a2FuIHRhbnBhIHN1YnF1ZXJ5IGJlcmxlYmloYW5cbiAgICBjb25zdCBzZWxlY3RRdWVyeSA9IGBcbiAgICAgIFNFTEVDVCBcbiAgICAgICAgdS5pZCwgdS5hdXRoX2lkLCB1LnVzZXJuYW1lLCB1LmZ1bGxfbmFtZSwgdS5iaW8sIHUubG9uZ19iaW8sIHUucHJvZmlsZV9qc29uLCB1LmFkZHJlc3MsIHUucGhvbmVfbnVtYmVyLCB1LmJpcnRoX2RhdGUsXG4gICAgICAgIGEuZW1haWwsXG4gICAgICAgIHVyLnJvbGUsXG4gICAgICAgIHVkLmRpdmlzaW9uX25hbWVcbiAgICAgIEZST00gdXNlcnMgdVxuICAgICAgTEVGVCBKT0lOIGF1dGggYSBPTiB1LmF1dGhfaWQgPSBhLmlkXG4gICAgICBMRUZUIEpPSU4gdXNlcl9yb2xlcyB1ciBPTiB1LmlkID0gdXIudXNlcl9pZFxuICAgICAgTEVGVCBKT0lOIHVzZXJfZGl2aXNpb25zIHVkIE9OIHUuaWQgPSB1ZC51c2VyX2lkXG4gICAgICBXSEVSRSB1LmlkID0gJDFcbiAgICAgIExJTUlUIDFcbiAgICBgO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHNlbGVjdFF1ZXJ5LCBbdXNlci51c2VySWRdKTtcblxuICAgIGlmIChyZXN1bHQucm93cy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUudGltZUVuZChcIlByb2ZpbGUgR2V0IEV4ZWN1dGlvblwiKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IG1lc3NhZ2U6IFwiVXNlciBub3QgZm91bmQuXCIgfSwgeyBzdGF0dXM6IDQwNCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyRGF0YSA9IHJlc3VsdC5yb3dzWzBdO1xuXG4gICAgY29uc29sZS50aW1lRW5kKFwiUHJvZmlsZSBHZXQgRXhlY3V0aW9uXCIpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgdXNlcjoge1xuICAgICAgICBpZDogdXNlckRhdGEuaWQsXG4gICAgICAgIGF1dGhJZDogdXNlckRhdGEuYXV0aF9pZCxcbiAgICAgICAgdXNlcm5hbWU6IHVzZXJEYXRhLnVzZXJuYW1lLFxuICAgICAgICBmdWxsTmFtZTogdXNlckRhdGEuZnVsbF9uYW1lLFxuICAgICAgICBlbWFpbDogdXNlckRhdGEuZW1haWwsXG4gICAgICAgIGJpbzogdXNlckRhdGEuYmlvLFxuICAgICAgICBsb25nQmlvOiB1c2VyRGF0YS5sb25nX2JpbyxcbiAgICAgICAgcHJvZmlsZUpzb246IHVzZXJEYXRhLnByb2ZpbGVfanNvbixcbiAgICAgICAgYWRkcmVzczogdXNlckRhdGEuYWRkcmVzcyxcbiAgICAgICAgcGhvbmVOdW1iZXI6IHVzZXJEYXRhLnBob25lX251bWJlcixcbiAgICAgICAgYmlydGhEYXRlOiB1c2VyRGF0YS5iaXJ0aF9kYXRlLFxuICAgICAgICByb2xlOiB1c2VyRGF0YS5yb2xlLFxuICAgICAgICBkaXZpc2lvbjogdXNlckRhdGEuZGl2aXNpb25fbmFtZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlByb2ZpbGUgZ2V0IGVycm9yOlwiLCBlcnJvcik7XG4gICAgY29uc29sZS50aW1lRW5kKFwiUHJvZmlsZSBHZXQgRXhlY3V0aW9uXCIpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gU3VkYWggZGlwZXJiYWlraTogdXNlciBkaWFtYmlsIGRlbmdhbiB0eXBpbmcgeWFuZyBiZW5hciBkYXJpIHBhcmFtZXRlciBmdW5jdGlvblxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZShyZXF1ZXN0OiBSZXF1ZXN0ICYgeyB1c2VyPzogeyB1c2VySWQ6IG51bWJlciB9IH0pIHtcbiAgY29uc29sZS50aW1lKFwiUHJvZmlsZSBVcGRhdGUgRXhlY3V0aW9uXCIpO1xuXG4gIHRyeSB7XG4gICAgY29uc3Qge1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBmdWxsTmFtZSxcbiAgICAgIGVtYWlsLFxuICAgICAgcGhvbmUsXG4gICAgICBiaXJ0aERhdGUsXG4gICAgICBiaW8sXG4gICAgICBsb25nQmlvLFxuICAgICAgYWRkcmVzcyxcbiAgICAgIHByb2ZpbGVKc29uLFxuICAgIH06IFByb2ZpbGVEYXRhID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG5cbiAgICBjb25zdCBlcnJvcnM6IFBhcnRpYWw8UmVjb3JkPGtleW9mIFByb2ZpbGVEYXRhLCBzdHJpbmc+PiA9IHt9O1xuICAgIGlmICghdXNlcm5hbWUgfHwgdXNlcm5hbWUubGVuZ3RoIDwgNikge1xuICAgICAgZXJyb3JzLnVzZXJuYW1lID0gXCJVc2VybmFtZSBtdXN0IGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycy5cIjtcbiAgICB9XG4gICAgaWYgKCFmdWxsTmFtZSkge1xuICAgICAgZXJyb3JzLmZ1bGxOYW1lID0gXCJGdWxsIG5hbWUgaXMgcmVxdWlyZWQuXCI7XG4gICAgfVxuICAgIGlmICghZW1haWwgfHwgIS9eXFxTK0BcXFMrXFwuXFxTKyQvLnRlc3QoZW1haWwpKSB7XG4gICAgICBlcnJvcnMuZW1haWwgPSBcIk11c3QgYmUgYSB2YWxpZCBlbWFpbCBmb3JtYXQuXCI7XG4gICAgfVxuICAgIGlmICghcGhvbmUgfHwgIS9eXFxkezEwLDE1fSQvLnRlc3QocGhvbmUpKSB7XG4gICAgICBlcnJvcnMucGhvbmUgPSBcIlBob25lIG11c3QgYmUgMTAtMTUgZGlnaXRzLlwiO1xuICAgIH1cbiAgICBpZiAoYmlydGhEYXRlKSB7XG4gICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoYmlydGhEYXRlKTtcbiAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgaWYgKGRhdGUgPiB0b2RheSkge1xuICAgICAgICBlcnJvcnMuYmlydGhEYXRlID0gXCJCaXJ0aCBkYXRlIGNhbm5vdCBiZSBpbiB0aGUgZnV0dXJlLlwiO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoYmlvICYmIGJpby5sZW5ndGggPiAxNjApIHtcbiAgICAgIGVycm9ycy5iaW8gPSBcIkJpbyBtdXN0IGJlIDE2MCBjaGFyYWN0ZXJzIG9yIGxlc3MuXCI7XG4gICAgfVxuICAgIGlmIChsb25nQmlvICYmIGxvbmdCaW8ubGVuZ3RoID4gMjAwMCkge1xuICAgICAgZXJyb3JzLmxvbmdCaW8gPSBcIkxvbmcgYmlvIG11c3QgYmUgMjAwMCBjaGFyYWN0ZXJzIG9yIGxlc3MuXCI7XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnNvbGUudGltZUVuZChcIlByb2ZpbGUgVXBkYXRlIEV4ZWN1dGlvblwiKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBtZXNzYWdlOiBcIlZhbGlkYXRpb24gZmFpbGVkXCIsIGVycm9ycyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgdXNlciA9IHJlcXVlc3QudXNlcjtcbiAgICBpZiAoIXVzZXIgfHwgIXVzZXIudXNlcklkKSB7XG4gICAgICBjb25zb2xlLnRpbWVFbmQoXCJQcm9maWxlIFVwZGF0ZSBFeGVjdXRpb25cIik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBcIlVuYXV0aG9yaXplZC5cIiB9LCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIC8vIFN1ZGFoIGRpcGVyYmFpa2k6IHF1ZXJ5IHVwZGF0ZSBlZmlzaWVuLCBoYW55YSB1cGRhdGUgZmllbGQgeWFuZyBkaXBlcmx1a2FuXG4gICAgY29uc3QgdXBkYXRlUXVlcnkgPSBgXG4gICAgICBVUERBVEUgdXNlcnMgXG4gICAgICBTRVQgdXNlcm5hbWUgPSAkMSwgZnVsbF9uYW1lID0gJDIsIGJpbyA9ICQzLCBsb25nX2JpbyA9ICQ0LCBcbiAgICAgICAgICBhZGRyZXNzID0gJDUsIHBob25lX251bWJlciA9ICQ2LCBwcm9maWxlX2pzb24gPSAkNywgdXBkYXRlZF9hdCA9IENVUlJFTlRfVElNRVNUQU1QXG4gICAgICBXSEVSRSBpZCA9ICQ4XG4gICAgYDtcblxuICAgIGF3YWl0IGV4ZWN1dGVRdWVyeSh1cGRhdGVRdWVyeSwgW1xuICAgICAgdXNlcm5hbWUsXG4gICAgICBmdWxsTmFtZSxcbiAgICAgIGJpbyxcbiAgICAgIGxvbmdCaW8sXG4gICAgICBhZGRyZXNzLFxuICAgICAgcGhvbmUsXG4gICAgICBwcm9maWxlSnNvbiA/IEpTT04uc3RyaW5naWZ5KHByb2ZpbGVKc29uKSA6IG51bGwsXG4gICAgICB1c2VyLnVzZXJJZCxcbiAgICBdKTtcblxuICAgIC8vIFN1ZGFoIGRpcGVyYmFpa2k6IHNlbGVjdCBzZXRlbGFoIHVwZGF0ZSBoYW55YSBhbWJpbCBkYXRhIHlhbmcgZGlwZXJsdWthblxuICAgIGNvbnN0IHNlbGVjdFF1ZXJ5ID0gYFxuICAgICAgU0VMRUNUIFxuICAgICAgICB1LmlkLCB1LmF1dGhfaWQsIHUudXNlcm5hbWUsIHUuZnVsbF9uYW1lLCB1LmJpbywgdS5sb25nX2JpbywgdS5wcm9maWxlX2pzb24sIHUuYWRkcmVzcywgdS5waG9uZV9udW1iZXIsIHUuYmlydGhfZGF0ZSxcbiAgICAgICAgdXIucm9sZSxcbiAgICAgICAgdWQuZGl2aXNpb25fbmFtZVxuICAgICAgRlJPTSB1c2VycyB1XG4gICAgICBMRUZUIEpPSU4gdXNlcl9yb2xlcyB1ciBPTiB1LmlkID0gdXIudXNlcl9pZFxuICAgICAgTEVGVCBKT0lOIHVzZXJfZGl2aXNpb25zIHVkIE9OIHUuaWQgPSB1ZC51c2VyX2lkXG4gICAgICBXSEVSRSB1LmlkID0gJDFcbiAgICAgIExJTUlUIDFcbiAgICBgO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZXhlY3V0ZVF1ZXJ5KHNlbGVjdFF1ZXJ5LCBbdXNlci51c2VySWRdKTtcbiAgICBjb25zdCB1cGRhdGVkVXNlciA9IHJlc3VsdC5yb3dzWzBdO1xuXG4gICAgLy8gTG9nIHRoZSBwcm9maWxlIHVwZGF0ZSBhY3Rpb25cbiAgICBhd2FpdCBleGVjdXRlUXVlcnkoXG4gICAgICBcIklOU0VSVCBJTlRPIHVzZXJfbG9ncyAodXNlcl9pZCwgYWN0aW9uKSBWQUxVRVMgKCQxLCAkMilcIixcbiAgICAgIFt1c2VyLnVzZXJJZCwgXCJ1cGRhdGVfcHJvZmlsZVwiXVxuICAgICk7XG5cbiAgICBjb25zb2xlLnRpbWVFbmQoXCJQcm9maWxlIFVwZGF0ZSBFeGVjdXRpb25cIik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICB1c2VyOiB7XG4gICAgICAgIGlkOiB1cGRhdGVkVXNlci5pZCxcbiAgICAgICAgYXV0aElkOiB1cGRhdGVkVXNlci5hdXRoX2lkLFxuICAgICAgICB1c2VybmFtZTogdXBkYXRlZFVzZXIudXNlcm5hbWUsXG4gICAgICAgIGZ1bGxOYW1lOiB1cGRhdGVkVXNlci5mdWxsX25hbWUsXG4gICAgICAgIGJpbzogdXBkYXRlZFVzZXIuYmlvLFxuICAgICAgICBsb25nQmlvOiB1cGRhdGVkVXNlci5sb25nX2JpbyxcbiAgICAgICAgcHJvZmlsZUpzb246IHVwZGF0ZWRVc2VyLnByb2ZpbGVfanNvbixcbiAgICAgICAgYWRkcmVzczogdXBkYXRlZFVzZXIuYWRkcmVzcyxcbiAgICAgICAgcGhvbmVOdW1iZXI6IHVwZGF0ZWRVc2VyLnBob25lX251bWJlcixcbiAgICAgICAgYmlydGhEYXRlOiB1cGRhdGVkVXNlci5iaXJ0aF9kYXRlLFxuICAgICAgICByb2xlOiB1cGRhdGVkVXNlci5yb2xlLFxuICAgICAgICBkaXZpc2lvbjogdXBkYXRlZFVzZXIuZGl2aXNpb25fbmFtZSxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIlByb2ZpbGUgdXBkYXRlIGVycm9yOlwiLCBlcnJvcik7XG4gICAgY29uc29sZS50aW1lRW5kKFwiUHJvZmlsZSBVcGRhdGUgRXhlY3V0aW9uXCIpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgbWVzc2FnZTogXCJJbnRlcm5hbCBzZXJ2ZXIgZXJyb3IuXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gU3VkYWggZGlwZXJiYWlraTogd3JhcHBpbmcgZGVuZ2FuIGF1dGggbWlkZGxld2FyZSBzdWRhaCBiZW5hciB1bnR1ayBwcm90ZWtzaSBlbmRwb2ludFxuZXhwb3J0IGNvbnN0IEdFVCA9IGF1dGhNaWRkbGV3YXJlKGdldFByb2ZpbGUpO1xuZXhwb3J0IGNvbnN0IFBVVCA9IGF1dGhNaWRkbGV3YXJlKHVwZGF0ZVByb2ZpbGUpO1xuLy8gUGVuamVsYXNhbjogU2VrYXJhbmcgZnVuZ3NpIGdldFByb2ZpbGUgZGFuIHVwZGF0ZVByb2ZpbGUgc3VkYWggbWVuZ2d1bmFrYW4gdHlwaW5nIHVzZXIgeWFuZyBiZW5hciBwYWRhIHBhcmFtZXRlciwgc2VoaW5nZ2EgYW1hbiBkaWd1bmFrYW4gZGVuZ2FuIGF1dGhNaWRkbGV3YXJlLiBRdWVyeSBqdWdhIHN1ZGFoIGxlYmloIGVmaXNpZW4gZGFuIGhhbnlhIG1lbmdhbWJpbCBmaWVsZCB5YW5nIGRpcGVybHVrYW4uXG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZXhlY3V0ZVF1ZXJ5IiwiYXV0aE1pZGRsZXdhcmUiLCJnZXRQcm9maWxlIiwicmVxdWVzdCIsImNvbnNvbGUiLCJ0aW1lIiwidXNlciIsInVzZXJJZCIsInRpbWVFbmQiLCJqc29uIiwibWVzc2FnZSIsInN0YXR1cyIsInNlbGVjdFF1ZXJ5IiwicmVzdWx0Iiwicm93cyIsImxlbmd0aCIsInVzZXJEYXRhIiwic3VjY2VzcyIsImlkIiwiYXV0aElkIiwiYXV0aF9pZCIsInVzZXJuYW1lIiwiZnVsbE5hbWUiLCJmdWxsX25hbWUiLCJlbWFpbCIsImJpbyIsImxvbmdCaW8iLCJsb25nX2JpbyIsInByb2ZpbGVKc29uIiwicHJvZmlsZV9qc29uIiwiYWRkcmVzcyIsInBob25lTnVtYmVyIiwicGhvbmVfbnVtYmVyIiwiYmlydGhEYXRlIiwiYmlydGhfZGF0ZSIsInJvbGUiLCJkaXZpc2lvbiIsImRpdmlzaW9uX25hbWUiLCJlcnJvciIsInVwZGF0ZVByb2ZpbGUiLCJwaG9uZSIsImVycm9ycyIsInRlc3QiLCJkYXRlIiwiRGF0ZSIsInRvZGF5Iiwic2V0SG91cnMiLCJPYmplY3QiLCJrZXlzIiwidXBkYXRlUXVlcnkiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlZFVzZXIiLCJHRVQiLCJQVVQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/profile/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/database.ts":
/*!*****************************!*\
  !*** ./src/lib/database.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closePool: () => (/* binding */ closePool),\n/* harmony export */   executeQuery: () => (/* binding */ executeQuery),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase)\n/* harmony export */ });\n/* harmony import */ var pg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pg */ \"pg\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([pg__WEBPACK_IMPORTED_MODULE_0__]);\npg__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n// Database configuration - intentionally unoptimized for workshop\nconst pool = new pg__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    user: process.env.DB_USER || \"postgres\",\n    host: process.env.DB_HOST || \"localhost\",\n    database: process.env.DB_NAME || \"workshop_db\",\n    password: process.env.DB_PASSWORD || \"admin123\",\n    port: parseInt(process.env.DB_PORT || \"5432\"),\n    // Bad practice: no connection pooling limits for demo\n    max: 100,\n    idleTimeoutMillis: 30000,\n    connectionTimeoutMillis: 2000\n});\n// Bad practice: raw SQL queries without proper error handling\nasync function executeQuery(query, params = []) {\n    console.time(\"Database Query Execution\");\n    try {\n        const client = await pool.connect();\n        const result = await client.query(query, params);\n        client.release();\n        console.timeEnd(\"Database Query Execution\");\n        return result;\n    } catch (error) {\n        console.error(\"Database error:\", error);\n        console.timeEnd(\"Database Query Execution\");\n        throw error;\n    }\n}\n// Bad practice: no connection pooling management\nasync function closePool() {\n    await pool.end();\n}\n// Initialize database tables\nasync function initializeDatabase() {\n    const createUsersTable = `\n    CREATE TABLE IF NOT EXISTS users (\n      id SERIAL PRIMARY KEY,\n      username VARCHAR(50) UNIQUE NOT NULL,\n      full_name VARCHAR(100) NOT NULL,\n      email VARCHAR(100) UNIQUE NOT NULL,\n      password_hash VARCHAR(255) NOT NULL,\n      birth_date DATE,\n      bio TEXT,\n      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\n    );\n  `;\n    try {\n        await executeQuery(createUsersTable);\n        console.log(\"Database initialized successfully\");\n    } catch (error) {\n        console.error(\"Failed to initialize database:\", error);\n        throw error;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RhdGFiYXNlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBMEI7QUFFMUIsa0VBQWtFO0FBQ2xFLE1BQU1DLE9BQU8sSUFBSUQsb0NBQUlBLENBQUM7SUFDcEJFLE1BQU1DLFFBQVFDLEdBQUcsQ0FBQ0MsT0FBTyxJQUFJO0lBQzdCQyxNQUFNSCxRQUFRQyxHQUFHLENBQUNHLE9BQU8sSUFBSTtJQUM3QkMsVUFBVUwsUUFBUUMsR0FBRyxDQUFDSyxPQUFPLElBQUk7SUFDakNDLFVBQVVQLFFBQVFDLEdBQUcsQ0FBQ08sV0FBVyxJQUFJO0lBQ3JDQyxNQUFNQyxTQUFTVixRQUFRQyxHQUFHLENBQUNVLE9BQU8sSUFBSTtJQUN0QyxzREFBc0Q7SUFDdERDLEtBQUs7SUFDTEMsbUJBQW1CO0lBQ25CQyx5QkFBeUI7QUFDM0I7QUFFQSw4REFBOEQ7QUFDdkQsZUFBZUMsYUFBYUMsS0FBYSxFQUFFQyxTQUFnQixFQUFFO0lBQ2xFQyxRQUFRQyxJQUFJLENBQUM7SUFDYixJQUFJO1FBQ0YsTUFBTUMsU0FBUyxNQUFNdEIsS0FBS3VCLE9BQU87UUFDakMsTUFBTUMsU0FBUyxNQUFNRixPQUFPSixLQUFLLENBQUNBLE9BQU9DO1FBQ3pDRyxPQUFPRyxPQUFPO1FBQ2RMLFFBQVFNLE9BQU8sQ0FBQztRQUNoQixPQUFPRjtJQUNULEVBQUUsT0FBT0csT0FBTztRQUNkUCxRQUFRTyxLQUFLLENBQUMsbUJBQW1CQTtRQUNqQ1AsUUFBUU0sT0FBTyxDQUFDO1FBQ2hCLE1BQU1DO0lBQ1I7QUFDRjtBQUVBLGlEQUFpRDtBQUMxQyxlQUFlQztJQUNwQixNQUFNNUIsS0FBSzZCLEdBQUc7QUFDaEI7QUFFQSw2QkFBNkI7QUFDdEIsZUFBZUM7SUFDcEIsTUFBTUMsbUJBQW1CLENBQUM7Ozs7Ozs7Ozs7OztFQVkxQixDQUFDO0lBRUQsSUFBSTtRQUNGLE1BQU1kLGFBQWFjO1FBQ25CWCxRQUFRWSxHQUFHLENBQUM7SUFDZCxFQUFFLE9BQU9MLE9BQU87UUFDZFAsUUFBUU8sS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyIvVXNlcnMvbWFjYm9vay9Eb2N1bWVudHMvcHJvamVjdHMvYmluYXIvbW9kdWxfNi9kZW1vLXJlcG9zaXRvcnkvc3JjL2xpYi9kYXRhYmFzZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQb29sIH0gZnJvbSBcInBnXCI7XG5cbi8vIERhdGFiYXNlIGNvbmZpZ3VyYXRpb24gLSBpbnRlbnRpb25hbGx5IHVub3B0aW1pemVkIGZvciB3b3Jrc2hvcFxuY29uc3QgcG9vbCA9IG5ldyBQb29sKHtcbiAgdXNlcjogcHJvY2Vzcy5lbnYuREJfVVNFUiB8fCBcInBvc3RncmVzXCIsXG4gIGhvc3Q6IHByb2Nlc3MuZW52LkRCX0hPU1QgfHwgXCJsb2NhbGhvc3RcIixcbiAgZGF0YWJhc2U6IHByb2Nlc3MuZW52LkRCX05BTUUgfHwgXCJ3b3Jrc2hvcF9kYlwiLFxuICBwYXNzd29yZDogcHJvY2Vzcy5lbnYuREJfUEFTU1dPUkQgfHwgXCJhZG1pbjEyM1wiLFxuICBwb3J0OiBwYXJzZUludChwcm9jZXNzLmVudi5EQl9QT1JUIHx8IFwiNTQzMlwiKSxcbiAgLy8gQmFkIHByYWN0aWNlOiBubyBjb25uZWN0aW9uIHBvb2xpbmcgbGltaXRzIGZvciBkZW1vXG4gIG1heDogMTAwLFxuICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsXG4gIGNvbm5lY3Rpb25UaW1lb3V0TWlsbGlzOiAyMDAwLFxufSk7XG5cbi8vIEJhZCBwcmFjdGljZTogcmF3IFNRTCBxdWVyaWVzIHdpdGhvdXQgcHJvcGVyIGVycm9yIGhhbmRsaW5nXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZVF1ZXJ5KHF1ZXJ5OiBzdHJpbmcsIHBhcmFtczogYW55W10gPSBbXSkge1xuICBjb25zb2xlLnRpbWUoXCJEYXRhYmFzZSBRdWVyeSBFeGVjdXRpb25cIik7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgcG9vbC5jb25uZWN0KCk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY2xpZW50LnF1ZXJ5KHF1ZXJ5LCBwYXJhbXMpO1xuICAgIGNsaWVudC5yZWxlYXNlKCk7XG4gICAgY29uc29sZS50aW1lRW5kKFwiRGF0YWJhc2UgUXVlcnkgRXhlY3V0aW9uXCIpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkRhdGFiYXNlIGVycm9yOlwiLCBlcnJvcik7XG4gICAgY29uc29sZS50aW1lRW5kKFwiRGF0YWJhc2UgUXVlcnkgRXhlY3V0aW9uXCIpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEJhZCBwcmFjdGljZTogbm8gY29ubmVjdGlvbiBwb29saW5nIG1hbmFnZW1lbnRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjbG9zZVBvb2woKSB7XG4gIGF3YWl0IHBvb2wuZW5kKCk7XG59XG5cbi8vIEluaXRpYWxpemUgZGF0YWJhc2UgdGFibGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZURhdGFiYXNlKCkge1xuICBjb25zdCBjcmVhdGVVc2Vyc1RhYmxlID0gYFxuICAgIENSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHVzZXJzIChcbiAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcbiAgICAgIHVzZXJuYW1lIFZBUkNIQVIoNTApIFVOSVFVRSBOT1QgTlVMTCxcbiAgICAgIGZ1bGxfbmFtZSBWQVJDSEFSKDEwMCkgTk9UIE5VTEwsXG4gICAgICBlbWFpbCBWQVJDSEFSKDEwMCkgVU5JUVVFIE5PVCBOVUxMLFxuICAgICAgcGFzc3dvcmRfaGFzaCBWQVJDSEFSKDI1NSkgTk9UIE5VTEwsXG4gICAgICBiaXJ0aF9kYXRlIERBVEUsXG4gICAgICBiaW8gVEVYVCxcbiAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsXG4gICAgICB1cGRhdGVkX2F0IFRJTUVTVEFNUCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXG4gICAgKTtcbiAgYDtcblxuICB0cnkge1xuICAgIGF3YWl0IGV4ZWN1dGVRdWVyeShjcmVhdGVVc2Vyc1RhYmxlKTtcbiAgICBjb25zb2xlLmxvZyhcIkRhdGFiYXNlIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2U6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlBvb2wiLCJwb29sIiwidXNlciIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSIiwiaG9zdCIsIkRCX0hPU1QiLCJkYXRhYmFzZSIsIkRCX05BTUUiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwicG9ydCIsInBhcnNlSW50IiwiREJfUE9SVCIsIm1heCIsImlkbGVUaW1lb3V0TWlsbGlzIiwiY29ubmVjdGlvblRpbWVvdXRNaWxsaXMiLCJleGVjdXRlUXVlcnkiLCJxdWVyeSIsInBhcmFtcyIsImNvbnNvbGUiLCJ0aW1lIiwiY2xpZW50IiwiY29ubmVjdCIsInJlc3VsdCIsInJlbGVhc2UiLCJ0aW1lRW5kIiwiZXJyb3IiLCJjbG9zZVBvb2wiLCJlbmQiLCJpbml0aWFsaXplRGF0YWJhc2UiLCJjcmVhdGVVc2Vyc1RhYmxlIiwibG9nIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/database.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/jwt.ts":
/*!************************!*\
  !*** ./src/lib/jwt.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMiddleware: () => (/* binding */ authMiddleware),\n/* harmony export */   generateToken: () => (/* binding */ generateToken),\n/* harmony export */   verifyToken: () => (/* binding */ verifyToken)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\n// Bad practice: hardcoded secret key\nconst JWT_SECRET = process.env.JWT_SECRET || \"super-secret-key-for-workshop-demo-only\";\n// Bad practice: no token expiration management\nfunction generateToken(payload) {\n    console.time(\"JWT Token Generation\");\n    try {\n        // Bad practice: using synchronous operations\n        const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign(payload, JWT_SECRET, {\n            expiresIn: \"24h\"\n        });\n        console.timeEnd(\"JWT Token Generation\");\n        return token;\n    } catch (error) {\n        console.error(\"JWT generation error:\", error);\n        console.timeEnd(\"JWT Token Generation\");\n        throw error;\n    }\n}\n// Bad practice: no proper error handling\nfunction verifyToken(token) {\n    console.time(\"JWT Token Verification\");\n    try {\n        // Bad practice: using synchronous operations\n        const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, JWT_SECRET);\n        console.timeEnd(\"JWT Token Verification\");\n        return decoded;\n    } catch (error) {\n        console.error(\"JWT verification error:\", error);\n        console.timeEnd(\"JWT Token Verification\");\n        throw error;\n    }\n}\n// Bad practice: middleware without proper error handling\nfunction authMiddleware(handler) {\n    return async (request)=>{\n        console.time(\"Auth Middleware Execution\");\n        try {\n            const authHeader = request.headers.get(\"authorization\");\n            if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n                console.timeEnd(\"Auth Middleware Execution\");\n                return new Response(JSON.stringify({\n                    message: \"No token provided\"\n                }), {\n                    status: 401,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n            const token = authHeader.substring(7);\n            const decoded = verifyToken(token);\n            // Bad practice: adding user to request object without proper typing\n            request.user = decoded;\n            console.timeEnd(\"Auth Middleware Execution\");\n            return handler(request);\n        } catch (error) {\n            console.error(\"Auth middleware error:\", error);\n            console.timeEnd(\"Auth Middleware Execution\");\n            return new Response(JSON.stringify({\n                message: \"Invalid token\"\n            }), {\n                status: 401,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2p3dC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUErQjtBQUUvQixxQ0FBcUM7QUFDckMsTUFBTUMsYUFDSkMsUUFBUUMsR0FBRyxDQUFDRixVQUFVLElBQUk7QUFFNUIsK0NBQStDO0FBQ3hDLFNBQVNHLGNBQWNDLE9BQVk7SUFDeENDLFFBQVFDLElBQUksQ0FBQztJQUNiLElBQUk7UUFDRiw2Q0FBNkM7UUFDN0MsTUFBTUMsUUFBUVIsd0RBQVEsQ0FBQ0ssU0FBU0osWUFBWTtZQUMxQ1MsV0FBVztRQUNiO1FBQ0FKLFFBQVFLLE9BQU8sQ0FBQztRQUNoQixPQUFPSDtJQUNULEVBQUUsT0FBT0ksT0FBTztRQUNkTixRQUFRTSxLQUFLLENBQUMseUJBQXlCQTtRQUN2Q04sUUFBUUssT0FBTyxDQUFDO1FBQ2hCLE1BQU1DO0lBQ1I7QUFDRjtBQUVBLHlDQUF5QztBQUNsQyxTQUFTQyxZQUFZTCxLQUFhO0lBQ3ZDRixRQUFRQyxJQUFJLENBQUM7SUFDYixJQUFJO1FBQ0YsNkNBQTZDO1FBQzdDLE1BQU1PLFVBQVVkLDBEQUFVLENBQUNRLE9BQU9QO1FBQ2xDSyxRQUFRSyxPQUFPLENBQUM7UUFDaEIsT0FBT0c7SUFDVCxFQUFFLE9BQU9GLE9BQU87UUFDZE4sUUFBUU0sS0FBSyxDQUFDLDJCQUEyQkE7UUFDekNOLFFBQVFLLE9BQU8sQ0FBQztRQUNoQixNQUFNQztJQUNSO0FBQ0Y7QUFFQSx5REFBeUQ7QUFDbEQsU0FBU0ksZUFBZUMsT0FBaUI7SUFDOUMsT0FBTyxPQUFPQztRQUNaWixRQUFRQyxJQUFJLENBQUM7UUFFYixJQUFJO1lBQ0YsTUFBTVksYUFBYUQsUUFBUUUsT0FBTyxDQUFDQyxHQUFHLENBQUM7WUFFdkMsSUFBSSxDQUFDRixjQUFjLENBQUNBLFdBQVdHLFVBQVUsQ0FBQyxZQUFZO2dCQUNwRGhCLFFBQVFLLE9BQU8sQ0FBQztnQkFDaEIsT0FBTyxJQUFJWSxTQUFTQyxLQUFLQyxTQUFTLENBQUM7b0JBQUVDLFNBQVM7Z0JBQW9CLElBQUk7b0JBQ3BFQyxRQUFRO29CQUNSUCxTQUFTO3dCQUFFLGdCQUFnQjtvQkFBbUI7Z0JBQ2hEO1lBQ0Y7WUFFQSxNQUFNWixRQUFRVyxXQUFXUyxTQUFTLENBQUM7WUFDbkMsTUFBTWQsVUFBVUQsWUFBWUw7WUFFNUIsb0VBQW9FO1lBQ25FVSxRQUFnQlcsSUFBSSxHQUFHZjtZQUV4QlIsUUFBUUssT0FBTyxDQUFDO1lBQ2hCLE9BQU9NLFFBQVFDO1FBQ2pCLEVBQUUsT0FBT04sT0FBTztZQUNkTixRQUFRTSxLQUFLLENBQUMsMEJBQTBCQTtZQUN4Q04sUUFBUUssT0FBTyxDQUFDO1lBQ2hCLE9BQU8sSUFBSVksU0FBU0MsS0FBS0MsU0FBUyxDQUFDO2dCQUFFQyxTQUFTO1lBQWdCLElBQUk7Z0JBQ2hFQyxRQUFRO2dCQUNSUCxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFDaEQ7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWNib29rL0RvY3VtZW50cy9wcm9qZWN0cy9iaW5hci9tb2R1bF82L2RlbW8tcmVwb3NpdG9yeS9zcmMvbGliL2p3dC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcblxuLy8gQmFkIHByYWN0aWNlOiBoYXJkY29kZWQgc2VjcmV0IGtleVxuY29uc3QgSldUX1NFQ1JFVCA9XG4gIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQgfHwgXCJzdXBlci1zZWNyZXQta2V5LWZvci13b3Jrc2hvcC1kZW1vLW9ubHlcIjtcblxuLy8gQmFkIHByYWN0aWNlOiBubyB0b2tlbiBleHBpcmF0aW9uIG1hbmFnZW1lbnRcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVRva2VuKHBheWxvYWQ6IGFueSkge1xuICBjb25zb2xlLnRpbWUoXCJKV1QgVG9rZW4gR2VuZXJhdGlvblwiKTtcbiAgdHJ5IHtcbiAgICAvLyBCYWQgcHJhY3RpY2U6IHVzaW5nIHN5bmNocm9ub3VzIG9wZXJhdGlvbnNcbiAgICBjb25zdCB0b2tlbiA9IGp3dC5zaWduKHBheWxvYWQsIEpXVF9TRUNSRVQsIHtcbiAgICAgIGV4cGlyZXNJbjogXCIyNGhcIiwgLy8gQmFkIHByYWN0aWNlOiBsb25nIGV4cGlyYXRpb24gZm9yIGRlbW9cbiAgICB9KTtcbiAgICBjb25zb2xlLnRpbWVFbmQoXCJKV1QgVG9rZW4gR2VuZXJhdGlvblwiKTtcbiAgICByZXR1cm4gdG9rZW47XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkpXVCBnZW5lcmF0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgY29uc29sZS50aW1lRW5kKFwiSldUIFRva2VuIEdlbmVyYXRpb25cIik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gQmFkIHByYWN0aWNlOiBubyBwcm9wZXIgZXJyb3IgaGFuZGxpbmdcbmV4cG9ydCBmdW5jdGlvbiB2ZXJpZnlUb2tlbih0b2tlbjogc3RyaW5nKSB7XG4gIGNvbnNvbGUudGltZShcIkpXVCBUb2tlbiBWZXJpZmljYXRpb25cIik7XG4gIHRyeSB7XG4gICAgLy8gQmFkIHByYWN0aWNlOiB1c2luZyBzeW5jaHJvbm91cyBvcGVyYXRpb25zXG4gICAgY29uc3QgZGVjb2RlZCA9IGp3dC52ZXJpZnkodG9rZW4sIEpXVF9TRUNSRVQpO1xuICAgIGNvbnNvbGUudGltZUVuZChcIkpXVCBUb2tlbiBWZXJpZmljYXRpb25cIik7XG4gICAgcmV0dXJuIGRlY29kZWQ7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkpXVCB2ZXJpZmljYXRpb24gZXJyb3I6XCIsIGVycm9yKTtcbiAgICBjb25zb2xlLnRpbWVFbmQoXCJKV1QgVG9rZW4gVmVyaWZpY2F0aW9uXCIpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEJhZCBwcmFjdGljZTogbWlkZGxld2FyZSB3aXRob3V0IHByb3BlciBlcnJvciBoYW5kbGluZ1xuZXhwb3J0IGZ1bmN0aW9uIGF1dGhNaWRkbGV3YXJlKGhhbmRsZXI6IEZ1bmN0aW9uKSB7XG4gIHJldHVybiBhc3luYyAocmVxdWVzdDogUmVxdWVzdCkgPT4ge1xuICAgIGNvbnNvbGUudGltZShcIkF1dGggTWlkZGxld2FyZSBFeGVjdXRpb25cIik7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpO1xuXG4gICAgICBpZiAoIWF1dGhIZWFkZXIgfHwgIWF1dGhIZWFkZXIuc3RhcnRzV2l0aChcIkJlYXJlciBcIikpIHtcbiAgICAgICAgY29uc29sZS50aW1lRW5kKFwiQXV0aCBNaWRkbGV3YXJlIEV4ZWN1dGlvblwiKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IFwiTm8gdG9rZW4gcHJvdmlkZWRcIiB9KSwge1xuICAgICAgICAgIHN0YXR1czogNDAxLFxuICAgICAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcoNyk7XG4gICAgICBjb25zdCBkZWNvZGVkID0gdmVyaWZ5VG9rZW4odG9rZW4pO1xuXG4gICAgICAvLyBCYWQgcHJhY3RpY2U6IGFkZGluZyB1c2VyIHRvIHJlcXVlc3Qgb2JqZWN0IHdpdGhvdXQgcHJvcGVyIHR5cGluZ1xuICAgICAgKHJlcXVlc3QgYXMgYW55KS51c2VyID0gZGVjb2RlZDtcblxuICAgICAgY29uc29sZS50aW1lRW5kKFwiQXV0aCBNaWRkbGV3YXJlIEV4ZWN1dGlvblwiKTtcbiAgICAgIHJldHVybiBoYW5kbGVyKHJlcXVlc3QpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBtaWRkbGV3YXJlIGVycm9yOlwiLCBlcnJvcik7XG4gICAgICBjb25zb2xlLnRpbWVFbmQoXCJBdXRoIE1pZGRsZXdhcmUgRXhlY3V0aW9uXCIpO1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6IFwiSW52YWxpZCB0b2tlblwiIH0pLCB7XG4gICAgICAgIHN0YXR1czogNDAxLFxuICAgICAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiIH0sXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG4iXSwibmFtZXMiOlsiand0IiwiSldUX1NFQ1JFVCIsInByb2Nlc3MiLCJlbnYiLCJnZW5lcmF0ZVRva2VuIiwicGF5bG9hZCIsImNvbnNvbGUiLCJ0aW1lIiwidG9rZW4iLCJzaWduIiwiZXhwaXJlc0luIiwidGltZUVuZCIsImVycm9yIiwidmVyaWZ5VG9rZW4iLCJkZWNvZGVkIiwidmVyaWZ5IiwiYXV0aE1pZGRsZXdhcmUiLCJoYW5kbGVyIiwicmVxdWVzdCIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiZ2V0Iiwic3RhcnRzV2l0aCIsIlJlc3BvbnNlIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzdWJzdHJpbmciLCJ1c2VyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/jwt.ts\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "pg":
/*!*********************!*\
  !*** external "pg" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = import("pg");;

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/jsonwebtoken","vendor-chunks/jws","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/safe-buffer","vendor-chunks/ms","vendor-chunks/lodash.once","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isplainobject","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isinteger","vendor-chunks/lodash.isboolean","vendor-chunks/lodash.includes","vendor-chunks/jwa","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprofile%2Froute&page=%2Fapi%2Fprofile%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofile%2Froute.ts&appDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmacbook%2FDocuments%2Fprojects%2Fbinar%2Fmodul_6%2Fdemo-repository&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();